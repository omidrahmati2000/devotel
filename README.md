# README GENERATED BY AI
# Job Offers API

<p align="center">
  <img src="https://img.shields.io/badge/NestJS-E0234E?style=for-the-badge&logo=nestjs&logoColor=white" alt="NestJS" />
  <img src="https://img.shields.io/badge/TypeScript-007ACC?style=for-the-badge&logo=typescript&logoColor=white" alt="TypeScript" />
  <img src="https://img.shields.io/badge/PostgreSQL-316192?style=for-the-badge&logo=postgresql&logoColor=white" alt="PostgreSQL" />
  <img src="https://img.shields.io/badge/Docker-2CA5E0?style=for-the-badge&logo=docker&logoColor=white" alt="Docker" />
</p>

<p align="center">
  A scalable RESTful API that aggregates job offers from multiple providers, transforms them into a unified format, and provides advanced querying capabilities.
</p>


## 📋 Table of Contents

- [Features](#-features)
- [Tech Stack](#-tech-stack)
- [Prerequisites](#-prerequisites)
- [Installation](#-installation)
    - [Local Setup (Without Docker)](#local-setup-without-docker)
    - [Docker Setup](#docker-setup)
- [API Documentation](#-api-documentation)
- [Testing](#-testing)
- [Project Structure](#-project-structure)
- [Configuration](#-configuration)
- [Development](#-development)
- [Contributing](#-contributing)
- [License](#-license)

## ✨ Features

- 🔄 **Multi-Provider Integration**: Seamlessly fetches job data from multiple sources
- 🔀 **Data Transformation**: Converts various data formats into a unified structure
- 🚫 **Duplicate Prevention**: Intelligent deduplication based on external IDs
- ⏰ **Scheduled Synchronization**: Automated data updates via configurable cron jobs
- 🔍 **Advanced Filtering**: Query jobs by title, location, company, salary range, and skills
- 📄 **Pagination Support**: Efficient data retrieval with customizable page sizes
- 📊 **RESTful API**: Clean and intuitive endpoints following REST principles
- 📚 **API Documentation**: Interactive Swagger/OpenAPI documentation
- 🧪 **Comprehensive Testing**: Unit, integration, and E2E test coverage
- 🐳 **Docker Support**: Containerized deployment with Docker Compose
- 📝 **Detailed Logging**: Structured logging for debugging and monitoring
- ⚡ **High Performance**: Optimized queries and caching strategies

## 🛠 Tech Stack

- **Framework**: [NestJS](https://nestjs.com/) - Progressive Node.js framework
- **Language**: [TypeScript](https://www.typescriptlang.org/) - Type-safe JavaScript
- **Database**: [PostgreSQL](https://www.postgresql.org/) - Reliable relational database
- **ORM**: [TypeORM](https://typeorm.io/) - Feature-rich ORM for TypeScript
- **Documentation**: [Swagger](https://swagger.io/) - API documentation
- **Testing**: [Jest](https://jestjs.io/) - JavaScript testing framework
- **Containerization**: [Docker](https://www.docker.com/) - Container platform

## 📋 Prerequisites

Before you begin, ensure you have the following installed:

- **Node.js** (v18 or higher) - [Download](https://nodejs.org/)
- **npm** (v8 or higher) - Comes with Node.js
- **PostgreSQL** (v14 or higher) - [Download](https://www.postgresql.org/download/)
- **Docker** (optional) - [Download](https://www.docker.com/get-started)
- **Docker Compose** (optional) - Comes with Docker Desktop

## 🚀 Installation

### Local Setup (Without Docker)

Follow these steps to run the application locally without Docker:

#### 1. Clone the Repository

```bash
git clone https://github.com/omidrahmati2000/devotel.git
cd job-offers-api

#### 2. Install Dependencies

bash
npm install

#### 3. Database Setup

Make sure PostgreSQL is running on your system, then create a database:

bash
# Access PostgreSQL
psql -U postgres

# Create database
CREATE DATABASE job_offers;

# Exit PostgreSQL
\q

#### 4. Environment Configuration

Create a `.env` file in the root directory:

bash
cp .env.example .env

Update the `.env` file with your local configuration:

env
# Application
NODE_ENV=development
PORT=3000

# Database
DB_HOST=localhost
DB_PORT=5432
DB_USERNAME=postgres
DB_PASSWORD=your_password_here
DB_NAME=job_offers

# TypeORM
TYPEORM_SYNCHRONIZE=false
TYPEORM_LOGGING=true
TYPEORM_MIGRATIONS_RUN=true

# Job Sync Configuration
SYNC_SCHEDULE_CRON=0 */6 * * *
SYNC_ON_STARTUP=true

# Provider APIs
PROVIDER1_API_URL=https://api.provider1.com/jobs
PROVIDER2_API_URL=https://api.provider2.com/jobs

# Pagination
DEFAULT_PAGE_SIZE=20
MAX_PAGE_SIZE=100

#### 5. Run Database Migrations

bash
# Generate migrations (if needed)
npm run migration:generate -- -n InitialMigration

# Run migrations
npm run migration:run

#### 6. Start the Application

bash
# Development mode (with hot-reload)
npm run start:dev

# Production mode
npm run build
npm run start:prod

The application will be available at `http://localhost:3000`

### Docker Setup

Follow these steps to run the application using Docker:

#### 1. Clone the Repository

bash
git clone <repository-url>
cd job-offers-api

#### 2. Environment Configuration

Create a `.env` file for Docker:

bash
cp .env.docker.example .env

Or create it manually with these contents:

env
# Application
NODE_ENV=production
PORT=3000

# Database (using Docker service names)
DB_HOST=postgres
DB_PORT=5432
DB_USERNAME=postgres
DB_PASSWORD=postgres
DB_NAME=job_offers

# TypeORM
TYPEORM_SYNCHRONIZE=false
TYPEORM_LOGGING=false
TYPEORM_MIGRATIONS_RUN=true

# Job Sync Configuration
SYNC_SCHEDULE_CRON=0 */6 * * *
SYNC_ON_STARTUP=true

# Provider APIs
PROVIDER1_API_URL=https://api.provider1.com/jobs
PROVIDER2_API_URL=https://api.provider2.com/jobs

#### 3. Create Docker Ignore File

Create a `.dockerignore` file:


node_modules
npm-debug.log
dist
.git
.gitignore
README.md
.env
.env.*
.vscode
.idea
coverage
.nyc_output
*.log

#### 4. Build and Run with Docker Compose

bash
# Build and start containers
docker-compose up --build

# Or run in detached mode
docker-compose up -d --build

#### 5. Verify the Setup

bash
# Check running containers
docker-compose ps

# View logs
docker-compose logs -f app

# Access the application
curl http://localhost:3000/health

The application will be available at `http://localhost:3000`

## 📖 API Documentation

Once the application is running, you can access the interactive API documentation:

- **Swagger UI**: `http://localhost:3000/api/docs`
- **OpenAPI JSON**: `http://localhost:3000/api/docs-json`

### Available Endpoints

| Method | Endpoint | Description |
|--------|----------|-------------|
| GET | `/health` | Health check endpoint |
| GET | `/api/job-offers` | Get paginated job offers with filters |
| GET | `/api/job-offers/:id` | Get a specific job offer by ID |
| GET | `/api/job-offers/sync/status` | Get synchronization status |
| POST | `/api/job-offers/sync/trigger` | Manually trigger synchronization |

### Example Requests

bash
# Get all job offers
curl http://localhost:3000/api/job-offers

# Filter by title and location
curl "http://localhost:3000/api/job-offers?title=engineer&location=San Francisco"

# Filter by salary range
curl "http://localhost:3000/api/job-offers?minSalary=100000&maxSalary=150000"

# Filter by skills
curl "http://localhost:3000/api/job-offers?skills=JavaScript&skills=TypeScript"

# Pagination
curl "http://localhost:3000/api/job-offers?page=2&pageSize=50"

## 🧪 Testing

### Running Tests

bash
# Unit tests
npm run test

# Unit tests with watch mode
npm run test:watch

# Test coverage
npm run test:cov

# E2E tests
npm run test:e2e

### Test Structure


test/
├── unit/                 # Unit tests
│   ├── services/        # Service tests
│   ├── controllers/     # Controller tests
│   └── transformers/    # Transformer tests
├── integration/         # Integration tests
└── e2e/                # End-to-end tests

## 📁 Project Structure


src/
├── config/              # Configuration modules
│   ├── configuration.ts
│   ├── database.config.ts
│   └── typeorm.config.ts
├── database/           # Database entities and migrations
│   ├── entities/
│   └── migrations/
├── job-offers/         # Job offers module
│   ├── controllers/
│   ├── services/
│   ├── interfaces/
│   └── dto/
├── scheduler/          # Cron job scheduler
│   └── scheduler.module.ts
├── transformers/       # Data transformation logic
│   ├── base/
│   └── providers/
├── utils/             # Utility services
│   └── logger.service.ts
├── app.module.ts      # Root application module
└── main.ts           # Application entry point

## ⚙️ Configuration

### Environment Variables

| Variable | Description | Default |
|----------|-------------|---------|
| `NODE_ENV` | Environment (development/production) | development |
| `PORT` | Application port | 3000 |
| `DB_HOST` | Database host | localhost |
| `DB_PORT` | Database port | 5432 |
| `DB_USERNAME` | Database username | postgres |
| `DB_PASSWORD` | Database password | - |
| `DB_NAME` | Database name | job_offers |
| `SYNC_SCHEDULE_CRON` | Cron expression for sync | 0 */6 * * * |
| `SYNC_ON_STARTUP` | Run sync on startup | true |

### Cron Schedule Examples

bash
# Every hour
SYNC_SCHEDULE_CRON=0 * * * *

# Every 6 hours
SYNC_SCHEDULE_CRON=0 */6 * * *

# Every day at 2 AM
SYNC_SCHEDULE_CRON=0 2 * * *

# Every Monday at 9 AM
SYNC_SCHEDULE_CRON=0 9 * * 1

## 💻 Development

### Development Commands

bash
# Start development server
npm run start:dev

# Build the project
npm run build

# Format code
npm run format

# Lint code
npm run lint

# Generate migration
npm run migration:generate -- -n MigrationName

# Run migrations
npm run migration:run

# Revert last migration
npm run migration:revert

### Adding New Job Providers

1. Create interface in `src/job-offers/interfaces/`
2. Create transformer in `src/transformers/providers/`
3. Register transformer in `TransformerService`
4. Add provider URL to configuration

### Code Style

This project uses:
- **ESLint** for linting
- **Prettier** for code formatting
- **Husky** for pre-commit hooks

## 🤝 Contributing

1. Fork the repository
2. Create your feature branch (`git checkout -b feature/amazing-feature`)
3. Commit your changes (`git commit -m 'Add some amazing feature'`)
4. Push to the branch (`git push origin feature/amazing-feature`)
5. Open a Pull Request

## 📄 License

This project is licensed under the MIT License - see the [LICENSE](LICENSE) file for details.

---

<p align="center">
  Made with ❤️ by Omid Rahmati
</p>